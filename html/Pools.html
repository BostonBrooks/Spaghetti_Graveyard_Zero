<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Spaghetti Graveyard Zero: Pools</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Spaghetti Graveyard Zero
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Pools </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >There are a few different options for storing objects in pools<br  />
 <br  />
 Do we want to store objects in a flat array or an array of arrays? Do we want to address objects by 64 bit memory locations or an index into the array? Do we wish to include handles with checking bits in case of deallocate-reallocate collisions? How much meta-information is included inside an object in the pool?<br  />
 <br  />
 I propose a common interface so different kinds of pool can be implemented and swapped in and out on a per-system basis.<br  />
 <br  />
 Necessary actions performed by a pool:<br  />
 <br  />
</p><ul>
<li>create pool<br  />
</li>
<li>clear / delete pool<br  />
</li>
<li>create object<br  />
</li>
<li>delete object<br  />
</li>
<li>convert between memory address, pool index and handle<br  />
</li>
<li>handles will have some equivalent to null pointers <br  />
 Other features that may come in handy:<br  />
 <br  />
</li>
<li>query object to find out what pool it belongs to<br  />
</li>
<li>query object to see what map it belongs to (we could just assume everything is in the same map and use thread local variables) <br  />
</li>
<li>query object to see what system/class it belongs to<br  />
 <br  />
</li>
<li>create object with a given handle, checking in case such an object already exists<br  />
</li>
<li>available spaces for new objects should be stored in a double-linked list <br  />
<br  />
</li>
<li>fast - prefer macros to small function calls? Features not needed:<br  />
 <br  />
</li>
<li>thread safety - threads share by communicating, not the reverse<br  />
 <br  />
 generic function prototypes://TODO <pre class="fragment">flag Pool_newPool(void** pool, int sizeof, int level1, int level2);
flag Pool_deletePool(void* pool);
flag Pool_clearPool(void* pool);
flag Pool_deleteA(void* pool, void* address);
flag Pool_deleteH(void* pool, Handle handle);
flag Pool_getAddress(void* pool, void** address, Handle handle);
flag Pool_getHandle(void* pool, void* handle, void* address);
</pre> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
